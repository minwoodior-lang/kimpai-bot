ğŸ§¾ [ì „ë‹¬ë¬¸] FREE í…”ë ˆë´‡ v2 â€“ ì¡°ê±´ë§Œ êµì²´ (ì„±ëŠ¥ ì˜í–¥ X)
0. ê³µí†µ ì›ì¹™ (ì¤‘ìš”)

ì§€ê¸ˆ ëŒì•„ê°€ëŠ” í…”ë ˆê·¸ë¨ ë´‡ êµ¬ì¡°ëŠ” ê·¸ëŒ€ë¡œ ìœ ì§€

ì›Œì»¤ì—ì„œ ë°ì´í„° ê°€ì ¸ì˜¤ëŠ” ë°©ì‹, íƒ€ì´ë¨¸, ë£¨í”„, sendMessage ì±„ë„ ë“± ìˆ˜ì • âŒ

ì´ë²ˆ ì‘ì—…ì€ **â€œì¡°ê±´ í•¨ìˆ˜ë§Œ ìˆ˜ì •â€**í•˜ëŠ” ê±¸ë¡œ í•œì •í•©ë‹ˆë‹¤.

REST ì¶”ê°€ í˜¸ì¶œ, WebSocket ì¶”ê°€ ì—°ê²°, EMA ê³„ì‚° ê°™ì€ ê±´ ì ˆëŒ€ ë„£ì§€ ë§ˆì„¸ìš”.

ì„±ëŠ¥ì— ì˜í–¥ ì—†ê²Œ:

ì´ë¯¸ API/workerì—ì„œ ë‚´ë ¤ì£¼ëŠ” í•„ë“œë§Œ ì‚¬ìš© (price_change_1h, kimp_change_5m, premium, volume_1m, volume_avg_3m, side_buy_ratio ë“±)

ë£¨í”„ ì•ˆì—ì„œ ìƒˆë¡œìš´ HTTP ìš”ì²­/ë¬´ê±°ìš´ ì—°ì‚° ê¸ˆì§€

1. ê³µí†µ: ì¶”ì„¸(ìƒìŠ¹/í•˜ë½) ì •ì˜ â€“ ê°€ë²¼ìš´ ë²„ì „

EMA200 ê³„ì‚°ì„ í…”ë ˆë´‡ ì•ˆì—ì„œ ìƒˆë¡œ í•˜ì§€ ë§ê³ ,
ê¸°ì¡´ì— ë‚´ë ¤ì˜¤ëŠ” 1ì‹œê°„ ë³€ë™ë¥ ë¡œ ì¶”ì„¸ë¥¼ ì •ì˜í•©ë‹ˆë‹¤.

def is_uptrend(ticker) -> bool:
    """
    ìƒìŠ¹ì¶”ì„¸:
    - 1ì‹œê°„ ê°€ê²© ë³€ë™ë¥  >= +1.5% (price_change_1h)
    """
    return ticker.price_change_1h is not None and ticker.price_change_1h >= 1.5


def is_downtrend(ticker) -> bool:
    """
    í•˜ë½ì¶”ì„¸:
    - 1ì‹œê°„ ê°€ê²© ë³€ë™ë¥  <= -1.5%
    """
    return ticker.price_change_1h is not None and ticker.price_change_1h <= -1.5


ğŸ”¹ EMA200 í•„í„°ëŠ” ë‚˜ì¤‘ì— statsWorkerì—ì„œ ë¯¸ë¦¬ ê³„ì‚°í•´ì£¼ëŠ” êµ¬ì¡°ë¡œ ë¶„ë¦¬í•˜ê³ ,
ì§€ê¸ˆì€ 1ì‹œê°„ ë³€ë™ë¥ ë¡œ ëŒ€ì²´í•´ì„œ â€œìƒìŠ¹ì¶”ì„¸/í•˜ë½ì¶”ì„¸ë§Œ ì´ì¤€ë‹¤â€ëŠ” ì·¨ì§€ë¥¼ ê·¸ëŒ€ë¡œ ì‚´ë¦½ë‹ˆë‹¤.
â†’ ì¡°ê±´ë§Œ ë°”ê¾¸ëŠ” ìˆ˜ì¤€ì´ë¼ ì„±ëŠ¥ ì˜í–¥ 0ì— ê°€ê¹ê²Œ ìœ ì§€.

2. ê³ ë˜ ì•Œë¦¼ ì¡°ê±´ (ë§¤ìˆ˜/ë§¤ë„)
(1) ê¸°ì¡´ ë£¨í”„/ì±„ë„ì€ ê·¸ëŒ€ë¡œ ì‚¬ìš©

í˜„ì¬ ê³ ë˜ ì•Œë¦¼ ë³´ë‚´ëŠ” í•¨ìˆ˜/ì±„ë„/ë£¨í”„ëŠ” ê·¸ëŒ€ë¡œ ë‘ê³ 

í•„í„°ë§ ì¡°ê±´ë§Œ êµì²´í•©ë‹ˆë‹¤.

(2) ìƒˆ ì¡°ê±´
def should_send_whale_buy(ticker) -> bool:
    """
    ê³ ë˜ ë§¤ìˆ˜ ì‹œê·¸ë„ (ìƒìŠ¹ì¶”ì„¸ì—ì„œë§Œ)
    """
    # â‘  ê¸°ë³¸ ê³ ë˜ ì¡°ê±´
    if ticker.volume_1m is None or ticker.volume_avg_3m is None:
        return False

    volume_ratio = ticker.volume_1m / max(ticker.volume_avg_3m, 1)

    if volume_ratio < 4.5:
        return False

    if ticker.side_buy_ratio is None or ticker.side_buy_ratio < 60:
        return False

    if ticker.notional_1m is None or ticker.notional_1m < 10_000:
        return False

    # â‘¡ ì¶”ì„¸ í•„í„°: ìƒìŠ¹ì¶”ì„¸ì¼ ë•Œë§Œ ë§¤ìˆ˜ ê³ ë˜ ë°œì†¡
    if not is_uptrend(ticker):
        return False

    return True


def should_send_whale_sell(ticker) -> bool:
    """
    ê³ ë˜ ë§¤ë„ ì‹œê·¸ë„ (í•˜ë½ì¶”ì„¸ì—ì„œë§Œ)
    """
    # â‘  ê¸°ë³¸ ê³ ë˜ ì¡°ê±´ (ìœ„ì™€ ë™ì¼)
    if ticker.volume_1m is None or ticker.volume_avg_3m is None:
        return False

    volume_ratio = ticker.volume_1m / max(ticker.volume_avg_3m, 1)
    if volume_ratio < 4.5:
        return False

    if ticker.side_sell_ratio is None or ticker.side_sell_ratio < 60:
        return False

    if ticker.notional_1m is None or ticker.notional_1m < 10_000:
        return False

    # â‘¡ ì¶”ì„¸ í•„í„°: í•˜ë½ì¶”ì„¸ì¼ ë•Œë§Œ ë§¤ë„ ê³ ë˜ ë°œì†¡
    if not is_downtrend(ticker):
        return False

    return True


ğŸ”¹ ì´ë ‡ê²Œ í•˜ë©´ íš¡ë³´ + ê³ ë˜ = ì „ë¶€ ë²„ë¦¼ â†’
ì›¨ì¼í—Œí„°ì²˜ëŸ¼ â€œí™•ì‹¤í•œ ìƒìŠ¹/í•˜ë½ ì¶”ì„¸ì—ì„œë§Œ ê³ ë˜ ì‹œê·¸ë„â€ì´ ë‚˜ì˜´.
ğŸ”¹ ì¶”ê°€ ìš”ì²­/EMA ì—†ìŒ â†’ ì„±ëŠ¥ ì˜í–¥ ì—†ìŒ.

3. ê¹€í”„ ì•Œë¦¼ ì¡°ê±´ (ë§¤ìˆ˜/ë§¤ë„ ë°©í–¥)

ê¹€í”„ ì±„ë„ë„ ê°™ì€ ì»¨ì…‰ìœ¼ë¡œ:

ê¸°ë³¸ ê¹€í”„ ê¸‰ë³€ ì¡°ê±´ +

ì¶”ì„¸ í•„í„°ë¥¼ ê°™ì´ ê±¸ì–´ì„œ â€œì“°ë ˆê¸° ì•Œë¦¼â€ ìµœëŒ€í•œ ì œê±°.

def should_send_kimp_long(ticker) -> bool:
    """
    ê¹€í”„ ê¸°ë°˜ ë§¤ìˆ˜(ë¡±) ì‹œê·¸ë„:
    - ê¹€í”„ê°€ ë¹ ë¥´ê²Œ ì˜¬ë¼ê°€ëŠ” + ìƒìŠ¹ì¶”ì„¸
    """
    # â‘  ê¸°ë³¸ ê¹€í”„ ê¸‰ë³€ ì¡°ê±´
    if ticker.kimp_change_5m is None or ticker.premium is None:
        return False

    # 5ë¶„ ë™ì•ˆ ê¹€í”„ +0.35%p ì´ìƒ
    if ticker.kimp_change_5m < 0.35:
        return False

    # ì ˆëŒ€ ê¹€í”„ 1% ì´ìƒ
    if abs(ticker.premium) < 1.0:
        return False

    # â‘¡ ì¶”ì„¸ í•„í„°: ìƒìŠ¹ì¶”ì„¸ì—ì„œë§Œ ë¡± ê³„ì—´ ì•Œë¦¼
    if not is_uptrend(ticker):
        return False

    return True


def should_send_kimp_short(ticker) -> bool:
    """
    ê¹€í”„ ê¸°ë°˜ ë§¤ë„(ìˆ) ì‹œê·¸ë„:
    - ê¹€í”„ê°€ ë¹ ë¥´ê²Œ ë‚´ë ¤ê°€ëŠ” + í•˜ë½ì¶”ì„¸
    """
    if ticker.kimp_change_5m is None or ticker.premium is None:
        return False

    # 5ë¶„ ë™ì•ˆ ê¹€í”„ -0.35%p ì´í•˜
    if ticker.kimp_change_5m > -0.35:
        return False

    if abs(ticker.premium) < 1.0:
        return False

    # â‘¡ ì¶”ì„¸ í•„í„°: í•˜ë½ì¶”ì„¸ì—ì„œë§Œ ìˆ ê³„ì—´ ì•Œë¦¼
    if not is_downtrend(ticker):
        return False

    return True

4. ë°œì†¡ ê°œìˆ˜ & ì¿¨ë‹¤ìš´ (ê¸°ì¡´ ë¡œì§ í™œìš©)

ì•„ë˜ ì •ì±…ì€ ê¸°ì¡´ í…”ë ˆë´‡ êµ¬ì¡° ì•ˆì—ì„œ, ë¡œì§ë§Œ ì´ë ‡ê²Œ ë§ì¶°ë‹¬ë¼ê³  ìš”ì²­í•˜ë©´ ë¨:

ì¿¨ë‹¤ìš´ (ê¸°ì¡´ dict/ìºì‹œ ê·¸ëŒ€ë¡œ í™œìš©)

ê³ ë˜: symbol + ë°©í–¥(up/down) ê¸°ì¤€ 30ë¶„ ì¿¨ë‹¤ìš´

ê¹€í”„: symbol + ë°©í–¥(long/short) ê¸°ì¤€ 10ë¶„ ì¿¨ë‹¤ìš´

í•œ ì‚¬ì´í´ë‹¹ ë°œì†¡ ê°œìˆ˜

10ë¶„ ìŠ¤ìº” ë£¨í”„ ê¸°ì¤€:

ê³ ë˜: ìµœëŒ€ 1ê°œ

ê¹€í”„: ìµœëŒ€ 1ê°œ

ì¡°ê±´ ë¯¸ì¶©ì¡± ì‹œ â†’ ì•„ë¬´ ê²ƒë„ ë°œì†¡í•˜ì§€ ì•ŠìŒ

ğŸ”¹ ê¸°ì¡´ ì¿¨ë‹¤ìš´ / last_sent_at êµ¬ì¡° ì‚¬ìš©í•˜ê³ ,
ìœ„ ë„¤ í•¨ìˆ˜(should_send_...)ë§Œ ì¡°ê±´ êµì²´í•˜ê²Œ í•´ë‹¬ë¼ê³  í•´ì£¼ì„¸ìš”.