[ì¤‘ìš”] exchange_markets í…Œì´ë¸” ìƒì„± ì™„ë£Œ â€“ ì´ì œ ì—¬ê¸°ì— ì‹¤ì œ ë§ˆì¼“ ë°ì´í„° ì±„ì›Œì£¼ì„¸ìš”

Supabase **í”„ë¡œë•ì…˜ DB(public ìŠ¤í‚¤ë§ˆ)**ì—
exchange_markets í…Œì´ë¸”ì„ ì œê°€ ì§ì ‘ ìƒì„±í•´ ë‘ì—ˆìŠµë‹ˆë‹¤.

ì•„ë˜ ìŠ¤í‚¤ë§ˆ ê·¸ëŒ€ë¡œ ì¡´ì¬í•©ë‹ˆë‹¤:

create table if not exists public.exchange_markets (
  id           bigserial primary key,
  exchange     text not null,     -- upbit / bithumb / coinone
  market_code  text not null,     -- KRW-BTC, BTC_KRW, BTC-KRW ë“± ê±°ë˜ì†Œ ì›ë³¸ ë§ˆì¼“ì½”ë“œ
  base_symbol  text not null,     -- BTC
  quote_symbol text not null,     -- KRW, USDT
  name_ko      text,              -- ë¹„íŠ¸ì½”ì¸
  name_en      text,              -- Bitcoin
  icon_url     text,              -- ì•„ì´ì½˜ URL
  is_active    boolean default true,
  created_at   timestamptz default now(),
  updated_at   timestamptz default now()
);

create unique index if not exists exchange_markets_unique_market
on public.exchange_markets (exchange, market_code);

ğŸ“Œ í…Œì´ë¸” ì•ˆì— ë°˜ë“œì‹œ ë“¤ì–´ ìˆì–´ì•¼ í•˜ëŠ” ì‹¤ì œ ë°ì´í„° êµ¬ì¡°

ê° ê±°ë˜ì†Œì˜ **ëª¨ë“  KRW ë§ˆì¼“(ì „ì²´)**ì´ ì•„ë˜ í˜•íƒœë¡œ ë“¤ì–´ê°€ì•¼ í•©ë‹ˆë‹¤.

ì˜ˆì‹œ (ì—…ë¹„íŠ¸):

exchange	market_code	base_symbol	quote_symbol	name_ko	name_en	icon_url
upbit	KRW-BTC	BTC	KRW	ë¹„íŠ¸ì½”ì¸	Bitcoin	https://.../btc.png

upbit	KRW-XRP	XRP	KRW	ë¦¬í”Œ	XRP	https://.../xrp.png

upbit	KRW-ETH	ETH	KRW	ì´ë”ë¦¬ì›€	Ethereum	https://.../eth.png

...	...	...	...	...	...	...

ì˜ˆì‹œ (ë¹—ì¸):

exchange	market_code	base_symbol	quote_symbol	name_ko	name_en	icon_url
bithumb	BTC_KRW	BTC	KRW	ë¹„íŠ¸ì½”ì¸	Bitcoin	...

ì˜ˆì‹œ (ì½”ì¸ì›):

exchange	market_code	base_symbol	quote_symbol	name_ko	name_en	icon_url
coinone	BTC	BTC	KRW	ë¹„íŠ¸ì½”ì¸	Bitcoin	...
ğŸ“Œ í”„ë¡ íŠ¸ì—ì„œ ì‚¬ìš©í•˜ëŠ” ìµœì¢… í•„ë“œ ê·œì¹™

PremiumTable, Home ë¦¬ìŠ¤íŠ¸ ë“± ëª¨ë“  í™”ë©´ì—ì„œ ì½”ì¸ëª…/ì•„ì´ì½˜ì€ ì•„ë˜ ìš°ì„ ìˆœìœ„ë¡œ í‘œì‹œë©ë‹ˆë‹¤:

ğŸ‘‰ ì´ë¦„
name_ko â†’ name_en â†’ base_symbol

ğŸ‘‰ ì•„ì´ì½˜
icon_url


ì¦‰, ì´ í•„ë“œë“¤ì´ Supabaseì—ì„œ ì •ìƒì ìœ¼ë¡œ ì±„ì›Œì ¸ ìˆì–´ì•¼
í™”ë©´ì— í•œê¸€ëª…/ì•„ì´ì½˜ì´ ì œëŒ€ë¡œ ë‚˜ì˜µë‹ˆë‹¤.

ğŸ“Œ ìš”ì²­ ì‘ì—…
â‘  refreshExchangeMarkets ìŠ¤í¬ë¦½íŠ¸ë¥¼ â€œì „ì²´ ë§ˆì¼“ ìë™ ìˆ˜ì§‘â€ìœ¼ë¡œ ìˆ˜ì •í•´ ì£¼ì„¸ìš”

í˜„ì¬ëŠ” ë¹—ì¸/ì½”ì¸ì› 12ê°œ ë“± ìƒ˜í”Œ 35ê°œë§Œ INSERT ë˜ì–´ ìˆëŠ”ë°,
ì´ì œ ì‹¤ì œ ìš´ì˜ ê¸°ì¤€ìœ¼ë¡œ ì „ì²´ KRW ë§ˆì¼“ì„ ë„£ì–´ì•¼ í•©ë‹ˆë‹¤.

í•„ìˆ˜ í¬í•¨ ì˜ì—­:

ì—…ë¹„íŠ¸: ì „ì²´ KRW ë§ˆì¼“ (ì•½ 180ê°œ ì´ìƒ)

ë¹—ì¸: ì „ì²´ KRW ë§ˆì¼“

ì½”ì¸ì›: ì „ì²´ KRW ë§ˆì¼“

â‘¡ ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ì‹¤ì œ ê°’ INSERT/UPSERT

ê° ë§ˆì¼“ë§ˆë‹¤ ì•„ë˜ í•„ë“œê°€ ì •í™•íˆ ì±„ì›Œì ¸ì•¼ í•©ë‹ˆë‹¤:

exchange

market_code

base_symbol

quote_symbol

name_ko â† êµ­ë‚´ í‘œì‹œëª…

name_en â† ì˜ì–´ í‘œì‹œëª…

icon_url â† ê±°ë˜ì†Œ ë˜ëŠ” ìì²´ ë§¤í•‘ ì•„ì´ì½˜ URL

íŠ¹íˆ KRW/USDT ê°™ì€ quote_symbol ì„¤ì •ì´ ì¤‘ìš”í•©ë‹ˆë‹¤.

â‘¢ PremiumTable.tsx, Home í™”ë©´ì—ì„œ getDisplayName() ì ìš©

í˜„ì¬ ì½”ì¸ëª…ì´ ì—¬ì „íˆ ì˜ë¬¸ ì‹¬ë³¼ë§Œ ëœ¨ëŠ” ê²ƒì€:

exchange_markets ê°’ì´ ì—†ìŒ

getDisplayName()ì„ ì‹¤ì œ column ë Œë”ë§ì—ì„œ í˜¸ì¶œí•˜ì§€ ì•ŠìŒ

ë‘ ê°€ì§€ ì´ìœ ì´ë¯€ë¡œ,
name_ko / name_en / icon_url í•„ë“œë¥¼ PremiumRowë¡œ ì „ë‹¬í•˜ê³ 
914~920ì¤„ì˜ ê¸°ì¡´ í…ìŠ¤íŠ¸ ë Œë”ë§ ë¶€ë¶„ì„:

getDisplayName(row.original)


ìœ¼ë¡œ êµì²´í•´ ì£¼ì„¸ìš”.

â‘£ refresh:markets ì˜¤ë¥˜ ì²˜ë¦¬

í˜„ì¬ error:

Could not find the table 'public.exchange_markets' in the schema cache


ì´ê±´ Supabase íƒ€ì… ì •ì˜ê°€ ê°±ì‹ ë˜ì§€ ì•Šì•„ì„œ ìƒê¸°ëŠ” ë¬¸ì œì…ë‹ˆë‹¤.

ë°©ë²•:

Supabase íƒ€ì… ì¬ìƒì„±(npx supabase gen types...)

ë˜ëŠ” supabase.from("exchange_markets" as any) ì‚¬ìš©

ë˜ëŠ” Database íƒ€ì…ì„ ë¶€ë¶„ í™•ì¥

ì–´ë–¤ ë°©ì‹ì´ë“  ìƒê´€ ì—†ìœ¼ë‹ˆ ëŸ°íƒ€ì„ì—ì„œ upsertê°€ ì •ìƒ ì‘ë™í•˜ë„ë¡ ìˆ˜ì • ë¶€íƒë“œë¦½ë‹ˆë‹¤.

ğŸ“Œ ìµœì¢… ëª©í‘œ

í™ˆ í™”ë©´ + í”„ë¦¬ë¯¸ì—„ í…Œì´ë¸”ì—ì„œ ëª¨ë“  ì½”ì¸ ì´ë¦„ì´ ê±°ë˜ì†Œ í•œê¸€ëª…ìœ¼ë¡œ ë‚˜ì˜¤ê³ 
ì•„ì´ì½˜ê¹Œì§€ ì „ë¶€ ì •ìƒ í‘œì‹œë˜ë„ë¡ í•˜ëŠ” ê²ƒ.

ì´ë¥¼ ìœ„í•´ í•„ìš”í•œ ê±´:

exchange_markets í…Œì´ë¸”ì— ì „ì²´ ë§ˆì¼“ ë°ì´í„°ê°€ ì±„ì›Œì ¸ ìˆì–´ì•¼ í•¨

í”„ë¡ íŠ¸ê°€ ê·¸ ë°ì´í„°ë¥¼ ì‹¤ì œë¡œ ì½ì–´ì•¼ í•¨

ì´ ë‘ ê°€ì§€ì…ë‹ˆë‹¤.