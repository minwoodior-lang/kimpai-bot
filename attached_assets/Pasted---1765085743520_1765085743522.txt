지금 답변에서 “차액 칼럼 동적 포맷”을 손보신 건 이해했습니다.
다만 제가 처음 요청했던 핵심 문제들은 아직 해결이 안 된 상태라,
다시 한 번 구체적으로 남은 문제와 수정 방향을 정리드립니다.

1. BTT(비트토렌트) 해외 가격 자체가 안 들어오는 문제

현재 화면에서 BTT 행을 보면:

현재가(위): ₩0.000615

아래 값: ₩0.00000000 또는 -

김프 / 프리미엄 관련 값도 전부 - 로 나옵니다.

= 해외 가격(foreignPriceKrw)이 아예 0 또는 null로 들어오는 상태인 것 같습니다.

김프가(참고 스샷)에서는:

현재가: 0.000615

아래: 0.0000668 등 정상 값이 나오고,

김프도 정상 계산됩니다.

📌 추정 원인

BTT는 거래소마다 심볼이 다르게 쓰이는 코인입니다.

업비트: BTT

바이비트/바이낸스 등: BTTC 또는 다른 심볼을 사용하는 경우가 많습니다.

그래서:

우리 premiumTable / prices.json 쪽에서
BYBIT:BTT:USDT 같은 키를 찾고 있는데,

실제 WebSocket/REST에서는 BYBIT:BTTC:USDT 로 들어오고 있어서
심볼 매칭이 실패 → foreignPriceKrw가 항상 0/null 이 되는 상황으로 보입니다.

✅ 요청사항

prices.json 과 premiumTable.json 에서 BTT 관련 엔트리를 직접 확인해 주세요.

예:

prices["UPBIT:BTC:KRW"] 처럼

prices["BYBIT:???BTT???:USDT"] 키가 실제로 무엇인지 확인

normalizeSymbol() 또는 심볼 매핑 로직에
BTT ↔ BTTC 매핑을 수동으로 추가해 주세요.

예시 (의미만 전달):

// 심볼 정규화/매핑 로직 어딘가에
if (exchange === "BYBIT" && symbol === "BTT") symbol = "BTTC";


이 매핑을 통해

UPBIT: BTT / KRW

BYBIT: BTTC / USDT

가 같은 코인으로 인식되어,

prices.json 에 BYBIT 쪽 가격이 제대로 들어오고

premiumTable 의 foreignPriceKrw 가 0이 아닌 실제 값으로 들어오도록 해 주세요.

프론트에서는 foreignPriceKrw 가 null/0일 경우
0.00000000 이 아니라 그냥 "-" 로 표기해 주세요.

지금처럼 “실제 가격이 없는데 0원처럼 보이는” 상황을 막기 위함입니다.

2. “현재가 아래 라인” 값이 아직 김프가와 다름

현재 구조:

TwoLinePriceCell의

topValue = koreanPrice (국내 현재가)

bottomValue = foreignPriceKrw (해외 현재가 또는 잘못된 값)

제가 원하는 동작:

현재가 아래 라인은 “전일 종가(prev_closing_price)” 를 표시해 주세요.

업비트 ticker API의 prev_closing_price 값을
prevPriceKrw 같은 필드로 백엔드에서 premiumTable 응답에 추가

프론트에서는:

// 현재가 셀
<TwoLinePriceCell
  topValue={formatKrwDynamic(row.koreanPrice)}      // 현재가
  bottomValue={formatKrwDynamic(row.prevPriceKrw)}  // 전일 종가
/>


prevPriceKrw 가 null/0 이면 "0.00000000" 이 아니라 "-" 로 표기

prevPriceKrw 도 formatKrwDynamic 규칙을 그대로 사용해서
BTT/PEPE처럼 저가 코인도 0.0000668, 0.00662 식으로 실제 값이 보이게 해 주세요.

현재는 bottomValue에 여전히 foreignPriceKrw 나 0값이 들어가고 있어서
김프가 화면과 비교했을 때 아래 라인 숫자가 맞지 않습니다.

3. 이미 하신 “차액 칼럼 동적 포맷”은 그대로 유지

premiumDiffKrw, changeAbsKrw, highDiffKrw, lowDiffKrw 에
formatKrwDynamic 적용해 주신 부분은 그대로 유지해 주세요.

다만, BTT처럼 데이터 자체가 0/null인 경우에는 "-"로 처리되는지만 한 번 더 확인 부탁드립니다.

요약하면,

BTT 심볼 매핑(BTT ↔ BTTC 등)을 수정해서 foreignPriceKrw가 실제 값으로 들어오게 해 주시고,

현재가 아래 라인을 전일 종가(prev_closing_price) 기반으로 다시 구성해 주시면,

김프가 화면과 거의 1:1로 맞춰질 것 같습니다.

지금은 포맷은 많이 좋아졌는데,
BTT처럼 외가격 자체가 비어 있는 케이스가 남아 있어서 이 부분만 꼭 한 번 더 봐 주세요. 🙏

감사합니다!