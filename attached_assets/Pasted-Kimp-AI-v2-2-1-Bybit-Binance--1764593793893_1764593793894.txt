Kimp AI – v2.2.1 해외 거래소 거래대금 정합성 + 숫자 표기 규칙 최종 개발 지시문

아래 지시문은 현재 발견된 Bybit/Binance 거래대금 오차 문제,
해외 미상장 코인 처리, 거래대금 표기 방식 개선을 모두 포함하는 최종 기준입니다.

✅ 1. 해외 거래소 거래대금(일) 정확도 — 필수 수정
1-1. Bybit 거래대금이 실제와 불일치 (핵심 문제)

현재 우리 시스템에서는 Bybit가 정상이라고 표시되지만,
실제 거래소 화면의 BTC 24h 거래대금과 비교하면 수배~수십배 오차가 발생합니다.

이 문제는:

필드 선택 문제

선물/현물 API 혼동 문제

fallback 데이터 문제
중 하나일 가능성이 매우 높습니다.

✔ 반드시 아래 검증 절차를 다시 수행해 주세요:
검증 기준 고정

국내: 업비트 KRW-BTC

해외: Bybit USDT Spot BTCUSDT

대상 심볼: BTC 단일

비교 대상 3개:

Bybit 공식 웹/앱 거래대금(USDT)

Bybit 공식 API BTCUSDT 24h volume

우리 API /api/premium/table → BTC 행의 volume24hUsdt

⚠️ 이 세 값이 “같은 자릿수”여야 정상입니다.

3조 vs 100조처럼 두 자릿수 차이 → 버그 확정

✅ 2. Bybit API 필드/엔드포인트 명확화 + 재구현

현재 코드에서:

Bybit turnover24h 사용 중이라고만 되어 있음 → 정확한 엔드포인트/필드 확인 불가

🔧 아래를 필수로 처리해 주세요:

코드에 주석으로 실제 사용 API 명시

예시:

// Bybit Spot 24h Ticker
// GET https://api.bybit.com/spot/v3/public/quote/ticker/24hr?symbol=BTCUSDT
// Using field: turnover24h (24h USDT quote volume)


실제 API 응답값을 curl로 직접 확인하고
turnover24h가 현물 USDT 거래량이 맞는지 문서 확인

그 값을 우리 API 결과와 대조하여 동일하게 만들어야 함.

✅ 3. 거래대금 비정상 값 자동 차단(안전장치)

Binance처럼 API 차단 또는 글로벌 데이터 fallback 시
거래량이 수십배~수백배 뻥튀기되는 경우가 있음.

반드시 아래 보호 로직을 추가해 주세요:
// 예시: 해외 거래대금이 국내 BTC 거래대금의 50배 이상이면 비정상 처리
if (overseasVolumeKrw > domesticVolumeKrw * 50) {
  overseasVolumeKrw = null; // "-" 표시
  overseasVolumeUsdt = null;
}


비정상일 경우:

해외 가격/거래액/김프% → "-"

행은 삭제하지 않음

로그로만 남김

✅ 4. 해외 미상장 코인 처리 — 강제 규칙 적용

해외 거래소에 없는 코인은:

해외 가격 = "-"

해외 거래액 = "-"

김프 = "-"

행 유지 (국내 기준 리스트는 그대로)

이 규칙을 Bybit / Binance / HTX / Gate / MEXC 전부에 동일하게 적용 바랍니다.

✅ 5. 거래소 및 코인 심볼 UI 정비

현재:

거래소 옆 “USDT 마켓” 등 표기 있음

이모지는 있으나 거래소 공식 심볼/아이콘이 빠짐

코인 심볼 아이콘 없음

🎯 수정 요청

거래소: 공식 SVG/PNG 아이콘 적용 (바이낸스, 바이비트, 업비트 등)

코인: CoinMarketCap 또는 TradingView의 대표 심볼 아이콘 적용

김프가와 동일한 레이아웃으로 정렬

🔥 6. 거래대금 숫자 표기 규칙 — 최종 기준(필수 적용)

지금은
“1.2조”
같은 불완전 단위 표기가 되어 사용자가 오해할 위험이 있음.

📌 최종 표기 규칙은 반드시 아래처럼 고정합니다.

✔ 1조 이상 → “X조 Y억”

예:

1조 1950억

3조 80억

12조 0억

단순 “3.1조” ← ❌ 금지

✔ 억 단위만 있을 때 → “X억”

예:

950억

480억

✔ 조/억 없는 경우 (100억 미만) → 더 작은 단위 표시 가능

예:

95억

12.5억 (억 이상은 1자리 소수 허용)

🔥 추가: 변동 깜빡임 적용된 것 확인됨 → 유지

가격/김프 변화 시 초록·빨강 0.6초 플래시

0.01% 이상 변동에서만 트리거
→ 정상 동작 중 (유지)

📌 최종 전달 요약 (개발자용 짧은 버전)

Bybit BTCUSDT 거래대금 불일치 — 재검증 필수

공식 사이트·공식 API·우리 API 3자 비교

Bybit API 엔드포인트/필드 명확화 후 재구현

거래대금 비정상 값은 "-"로 자동 차단 (보호 로직 필수)

해외 미상장 코인 규칙 유지 (가격/거래액/김프 '-')

거래소 아이콘 + 코인 심볼 아이콘 UI 반영

거래액 표기 방식 변경 (“1조 1950억” 구조로만 표기)