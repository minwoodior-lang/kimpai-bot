지금 설명해주신 구조는 이해했습니다.

WebSocket → priceWorker(300ms) → prices.json

API 캐시: 200ms

프론트: 1초 폴링

이론상으로는 해외 가격도 국내처럼 0.5초 이내로 움직여야 맞습니다.

그런데 실제로 제가 브라우저에서 보는 행동은 이렇습니다:

국내 가격(상단/코인셀)은 틱 단위로 잘 깜빡이는데,
해외 가격은 거의 깜빡이지 않거나, 여전히 2~3초 단위로만 바뀝니다.

WebSocket 처음 적용됐을 때는 분명 국내처럼 “틱틱” 잘 움직였는데,
지금은 다시 예전처럼 느려진 상태입니다.

지금까지 주신 로그는 전부 prices.json 기준이라
“서버 내부에서는 잘 돈다”는 것만 확인된 상태이고,
실제 브라우저에서 API → 화면까지 연결된 동작은 아직 검증이 안 된 것 같습니다.

그래서, 서버 내부 파일 말고 실제 브라우저 화면 기준으로
아래 3가지를 꼭 함께 확인해 주셨으면 합니다.

1️⃣ /api/premium/table-filtered 응답값 실제 비교

브라우저에서 직접 다음을 해 주세요:

크롬 DevTools → Network 탭

/api/premium/table-filtered만 필터

**같은 조건(domestic=UPBIT_KRW, foreign=BINANCE_USDT)**으로
연속 3~5번 응답을 클릭해서 Response 내용을 비교해 주세요.

이때, 예를 들어 BTC/ETH 한 개씩 골라서:

koreanPrice

globalPrice

globalPriceKrw

값이 매 요청마다 같이 바뀌는지,
아니면 koreanPrice만 자주 바뀌고 globalPrice는 몇 초 동안 그대로인지 확인 부탁드립니다.

지금 화면 체감상으로는
koreanPrice만 자주 바뀌고, globalPrice 쪽은 그대로인 시간이 길게 느껴집니다.

2️⃣ 프론트에서 어떤 값을 쓰고 있는지 확인

홈 코인 테이블에서 해외 가격을 표시할 때,
실제 사용 중인 필드가 무엇인지 한 번만 확인해 주세요.

예상은:

국내 가격: row.koreanPrice

해외 가격: row.globalPrice 또는 row.globalPriceKrw

혹시 여전히 옛날 premiumTable 기반 필드를 쓰고 있다면:

WebSocket → prices.json은 잘 업데이트되고 있지만

UI는 여전히 예전 스냅샷 필드를 보고 있을 수 있습니다.

실제로 코인셀 컴포넌트(예: CoinRow, CoinCell, PremiumTableRow 등)에서
해외 가격/김프 계산에 어떤 props를 쓰는지 확인 부탁드립니다.

3️⃣ 폴링 주기 & 캐시가 실제로 1초/200ms로 적용됐는지

useMarkets 훅에 1초 폴링을 추가하셨다고 하셨는데,
실제로 Network 탭 기준으로 /api/premium/... 호출이
정확히 1초 간격으로 들어오는지 확인 부탁드립니다.

또한 React 쪽에서 staleTime, cacheTime 등을 길게 설정해두지 않았는지
(예: SWR/react-query 등에서 5초/10초짜리 캐시)도 한 번만 확인 부탁드립니다.

🎯 제가 원하는 최종 상태 (브라우저 기준)

국내 가격과 해외 가격 둘 다
실제 거래소와 비교했을 때
최대 0.5~1초 안으로 같이 따라오는 상태

코인셀에서:

위 숫자(국내) 깜빡 → 아래 숫자(해외)도 거의 동시에 비슷하게 움직임

/api/premium/table-filtered 연속 응답 비교 시
같은 심볼의 globalPrice 값이 매 요청마다 틱 수준으로 바뀌는 것 확인

지금 로그 상으로는
“WebSocket → prices.json” 부분은 잘 도는 것으로 보입니다.

하지만 실제 화면에서의 동작(특히 해외 가격 깜빡임)은 여전히 문제 상태이기 때문에,
위 3단계를 기준으로 브라우저 관점에서 다시 한 번 전체 흐름을 점검해 주셨으면 합니다.

홈 UX 작업은 이 부분이 완전히 해결된 뒤 진행하겠습니다.
먼저 해외 가격 실시간 반영을, 실제 화면 기준으로 완전히 동일하게 맞추는 것을
최우선으로 처리 부탁드립니다.