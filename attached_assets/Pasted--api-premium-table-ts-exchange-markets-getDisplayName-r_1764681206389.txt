ğŸ“Œ [ìš”ì²­] /api/premium/table.tsì— exchange_markets ì¡°ì¸ ì¶”ê°€

í”„ë¡ íŠ¸ì—ì„œ getDisplayName(row) ë¡œì§ì´ ì™„ì„±ë˜ì—ˆì§€ë§Œ
APIì—ì„œ exchange_markets ê°’ì„ ë‚´ë ¤ì£¼ì§€ ì•Šì•„ì„œ
row.name_ko / row.name_en / row.icon_urlì´ ì „ë¶€ nullì…ë‹ˆë‹¤.

276ê°œ ë§ˆì¼“ ë°ì´í„°ëŠ” Supabaseì— ì •ìƒ ì‚½ì… ì™„ë£ŒëìŠµë‹ˆë‹¤.
ì´ì œ ì•„ë˜ ì¡°ì¸ë§Œ êµ¬í˜„í•˜ë©´ í•œê¸€ëª…/ì•„ì´ì½˜ì´ ë°”ë¡œ í‘œì‹œë©ë‹ˆë‹¤.

ğŸ”§ API ìˆ˜ì • ì‚¬í•­

í˜„ì¬ ì½”ë“œ(ì˜ˆìƒ):

const { data, error } = await supabase
  .from("exchange_prices")
  .select("*")
  .eq("exchange", exchange)
  .eq("quote", "KRW");

ğŸ” ì•„ë˜ë¡œ ìˆ˜ì • (JOIN exchange_markets)
const { data, error } = await supabase
  .from("exchange_prices")
  .select(`
    id,
    exchange,
    base,
    quote,
    price,
    change,
    volume,
    timestamp,
    exchange_markets (
      name_ko,
      name_en,
      icon_url
    )
  `)
  .eq("exchange", exchange)      // upbit/bithumb/coinone
  .eq("quote", "KRW");


Supabaseì—ì„œëŠ”
exchange_prices.base = exchange_markets.base_symbol
exchange_prices.quote = exchange_markets.quote_symbol
exchange_prices.exchange = exchange_markets.exchange
ì„ ìë™ìœ¼ë¡œ ë§¤ì¹­í•´ì¤€ë‹¤.

í•„ìš”í•˜ë‹¤ë©´ ëª…ì‹œì  JOINë„ ê°€ëŠ¥:

.from("exchange_prices")
.select(`
  *,
  exchange_markets!inner (
    name_ko,
    name_en,
    icon_url
  )
`)

ğŸ”„ ì‘ë‹µ íƒ€ì…(PremiumRow) ì—…ë°ì´íŠ¸
export type PremiumRow = {
  symbol: string;
  price: number;
  exchange: string;
  quote: string;
  change: number;
  volume: number;
  timestamp: string;

  // ìƒˆ í•„ë“œ
  name_ko?: string;
  name_en?: string;
  icon_url?: string;
};


ê·¸ë¦¬ê³  API ì‘ë‹µì—ì„œ:

rows = data.map(row => ({
  symbol: row.base,
  price: row.price,
  exchange: row.exchange,
  quote: row.quote,
  change: row.change,
  volume: row.volume,
  timestamp: row.timestamp,

  name_ko: row.exchange_markets?.name_ko || null,
  name_en: row.exchange_markets?.name_en || null,
  icon_url: row.exchange_markets?.icon_url || null
}));

ğŸ¨ í”„ë¡ íŠ¸ì—ì„œëŠ” ì´ë¯¸ getDisplayName ì ìš©ë¨

ì´ì œ row.name_ko ê°’ë§Œ ë“¤ì–´ì˜¤ë©´:

ë¦¬í”Œ  
ë¹„íŠ¸ì½”ì¸  
ì˜¤ë¥´ì¹´  
í´ë¦¬ê³¤  
ì†”ë¼ë‚˜  
â€¦


ì´ë ‡ê²Œ ì „ë¶€ ìë™ìœ¼ë¡œ í•œê¸€ëª…ìœ¼ë¡œ í‘œì‹œë¨.
ì•„ì´ì½˜ë„ icon_url ê·¸ëŒ€ë¡œ ì¶œë ¥ ê°€ëŠ¥.

ğŸš€ ìµœì¢… ëª©í‘œ ìš”ì•½

exchange_markets â†’ 276ê°œ ë§ˆì¼“ ì¤€ë¹„ë¨ (ì™„ë£Œ)

PremiumTable.tsx â†’ getDisplayName ì ìš© ì™„ë£Œ (ì™„ë£Œ)

â— APIì—ì„œ exchange_markets ì¡°ì¸ â†’ ì§€ê¸ˆ ì´ê±° í•˜ë©´ ë

Dev server ì¬ì‹œì‘ í›„ â†’ í™ˆ/í”„ë¦¬ë¯¸ì—„ í…Œì´ë¸”ì— í•œê¸€ëª… + ì•„ì´ì½˜ í‘œì‹œ