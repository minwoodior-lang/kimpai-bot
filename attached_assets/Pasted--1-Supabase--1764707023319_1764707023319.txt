📊 [최종 작업 완료 요약]

현재까지 다음 작업이 모두 정상적으로 완료되었습니다:

1) Supabase 완전 제거
 - 시세, 프리미엄, 심볼, 메타데이터 전부 로컬 JSON 기반으로 재설계
 - 모든 Supabase SELECT/INSERT 제거
 - 가격/메타데이터 기능에 Supabase 의존성 ZERO

2) API 정상 작동
 - /api/premium/table 호출 시 서버 로그 200 OK 정상 반환
 - Supabase read-only / PGRST002 에러 완전 제거됨

3) exchange_markets.json 재구성 완료
 - 국내: 업비트 KRW/BTC/USDT + 빗썸 KRW/BTC/USDT + 코인원 KRW
 - 해외: Binance USDT/BTC/Futures + OKX USDT + Bybit USDT
         Bitget USDT + Gate.io USDT + HTX USDT + MEXC USDT
 - 총 34개 마켓 조합 구성된 상태

4) priceWorker.ts 최적화
 - 거래소별 API 타임아웃, 실패 재시도, 딜레이 조절 완료
 - 배치 요청 + 병렬/순차 혼합 처리로 안정화
 - premiumTable.json 생성 성공 (BTC/ETH/XRP/ADA 등)

5) premiumTable.json 생성 확인
 - 실시간 시세/김프 계산 성공
 - JSON 정상 업데이트됨

⚠ 현재 남은 문제

프론트엔드에서 다음 에러 발생 중:
  - 브라우저 콘솔: "unhandled exception"
  - PremiumTable 컴포넌트에서 데이터 매핑 실패로 보임
  - API는 200 OK지만 화면에 코인이 표시되지 않음

원인 추정:
  - API 응답 구조가 기존 Supabase 방식과 달라짐
  - PremiumTable.tsx 내부 매핑 로직이 새 구조를 읽지 못함
  - 혹은 exchange_markets.json 심볼 커버리지가 PremiumTable에 1:1 반영되지 않음

📌 요청드리는 작업 (레플릿 담당)

아래 3가지 작업을 반드시 확인 부탁드립니다.

────────────────────────────

① PremiumTable 컴포넌트 수정  
 - 현재 API 구조는 다음 형태입니다:

    {
      "symbol": "BTC",
      "name_ko": "비트코인",
      "name_en": "Bitcoin",
      "icon_url": "/coins/BTC.png",
      "koreanPrice": ~,
      "globalPrice": ~,
      "premium": ~,
      ...
    }

 - 프론트 컴포넌트가 이 구조와 100% 일치하도록 매핑 로직 점검 필요합니다.
 - 특히 `row.symbol` / `row.base_symbol` / `row.name_ko` 처리 부분 확인 요청드립니다.

② exchange_markets.json ↔ master_symbols.json ↔ premiumTable.json
   **심볼 커버리지 체크**  
 - 일부 코인만 표시되는 현상이 있어 누락 심볼 존재할 가능성이 큽니다.
 - 아래 스크립트를 실행해서 누락된 심볼 목록을 확인해 주세요.

    (scripts/checkCoverage.ts)

③ 누락 심볼/마켓이 있으면  
   - exchange_markets.json 업데이트  
   - priceWorker.ts 루프가 모든 심볼을 순회하는지 확인  
   - premiumTable.json 전체 재생성

────────────────────────────

📌 필수 체크 스크립트

프로젝트에 `scripts/checkCoverage.ts` 추가 후 실행해 주세요.

(코드 전달완료됨 — 다시 필요하면 말씀주세요)

실행:

    npx tsx scripts/checkCoverage.ts

결과 로그 전체를 공유 부탁드립니다.  
누락된 심볼/마켓이 무엇인지 분석해서 다음 작업 이어가겠습니다.

────────────────────────────

📌 결론

백엔드는 Supabase 의존성이 완전 제거되고 안정화되었습니다.  
현재 남은 문제는 **"프론트 PremiumTable이 새 API 구조를 제대로 읽지 못하는 것"** 그리고  
**"exchange_markets.json → priceWorker.ts → premiumTable.json** 의 심볼 연결 부분입니다.

출력해 주시는 로그 확인 후 즉시 다음 단계 진행하겠습니다.
