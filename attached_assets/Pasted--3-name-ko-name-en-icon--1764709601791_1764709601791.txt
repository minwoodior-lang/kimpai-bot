다음 작업을 즉시 반영 부탁드립니다.

현재 국내 3대 거래소(업비트·빗썸·코인원) 기준
**코인 한글명(name_ko), 영문명(name_en), 아이콘(icon)**을 완전 자동 수집하는 인프라를
이전에 정상 작동했던 구조 그대로 다시 구현해야 합니다.

✅ 1. 거래소별 name_ko / name_en 수집 원천은 각 거래소 공지사항 크롤링 기반

이전 버전에서 성공했던 방식 그대로입니다.

✔ 업비트

업비트는 공지 크롤링 없이 공식 API 자체에서 한글/영문 제공

이걸 그대로 1순위로 사용

✔ 빗썸

빗썸 상장 공지 크롤링 →
“심볼 → 한글명 / 영문명” 맵 자동 구축

이 매핑을 그대로 2순위로 사용

✔ 코인원 ← 중요 (우리가 성공했던 부분)

코인원도 코인원 상장 공지에서 한글/영문명 직접 수집

코인원 API의 "AMP/앰프" 같은 문자열을 파싱하는 게 아니라

코인원 공지에서 정식 명칭을 긁어와서 심볼 기준으로 매핑하는 방식
→ 이게 아까 완벽히 성공한 로직임

즉, 세 거래소 모두 공지 기반 자동화로 되도록 만들기.

✅ 2. 수집 순서 (이전 성공한 구조 그대로)
(1) 업비트 마켓 목록 + 한글/영문명
GET https://api.upbit.com/v1/market/all?isDetails=true


base_symbol, name_ko, name_en 바로 저장

(2) 빗썸 상장 공지 크롤링

상장 공지에서:

티커 (BTC)

한글명 “비트코인”

영문명 “Bitcoin”

bithumbNames[BTC] = { ko, en }

(3) 코인원 상장 공지 크롤링 (아까 성공한 EXACT 방식)

이게 가장 중요함.

코인원 공지 예시:

[신규 상장] 앰프(AMP) 상장 안내


크롤링 시 추출:

심볼: AMP

한글명: 앰프

영문명: Amp 또는 AMP (공지에 표기된 exact 영문)

❗중요: 코인원은 공지에 “한글/영문”이 함께 기재됨 →
→ 이걸 symbol 기준으로 정확히 저장해야 함.

예시 매핑:

coinoneNames = {
  "AMP": { name_ko: "앰프", name_en: "Amp" },
  "MANA": { name_ko: "디센트럴랜드", name_en: "Decentraland" },
  ...
}


이 로직이 아까 우리가 구현했을 때
코인원 한글명/영문명 100% 자동 수집에 성공했던 EXACT 구조임.

✅ 3. 최종 병합 규칙 (그대로 가져가면 됨)

3개 거래소 모두에서 이름을 가져온 뒤,
심볼 기준으로 합칩니다.

우선순위:

업비트 (정확도 최고)

코인원 공지 기반 이름

빗썸 공지 기반 이름

병합 예시:

function mergeNames(upbit, coinone, bithumb) {
  const symbols = new Set([
    ...Object.keys(upbit),
    ...Object.keys(coinone),
    ...Object.keys(bithumb),
  ]);

  const out = {};

  for (const s of symbols) {
    out[s] = {
      symbol: s,
      name_ko: upbit[s]?.name_ko 
               ?? coinone[s]?.name_ko 
               ?? bithumb[s]?.name_ko
               ?? null,
      name_en: upbit[s]?.name_en 
               ?? coinone[s]?.name_en
               ?? bithumb[s]?.name_en
               ?? s,
    };
  }

  return out; // 최종 심볼별 표준 메타데이터
}

✅ 4. exchange_markets 저장은 “각 거래소 마켓 그대로”

지금처럼 408개로 합쳐놓지 말고
각 거래소의 마켓 수 그대로:

업비트: 예) 260개

빗썸: 예) 878개

코인원: 예) 200개
→ 각각 분리해서 저장해야 함.

형식:

{
  exchange: "COINONE",
  market: "KRW-AMP",
  base_symbol: "AMP",
  quote_symbol: "KRW",
  name_ko: mergedNames["AMP"].name_ko,
  name_en: mergedNames["AMP"].name_en
}

✅ 5. 아이콘(icon) 매핑

심볼 기준 /public/coin-icons/SYMBOL.png 사용
→ 없으면 symbolIcons.json
→ 그래도 없으면 /default.png

이 규칙을 모든 거래소에 동일하게 적용

📌 6. 요약 – 반드시 이 스펙대로 구현해주세요

업비트 API → 이름 수집

빗썸 공지 → 이름 크롤링 자동화

코인원 공지 → 이름 크롤링 자동화 (중요) ← 아까 우리가 성공했던 EXACT 방식

세 거래소 이름 병합 (우선순위 업비트 > 코인원 > 빗썸)

exchange_markets는 거래소별로 개수 보존해서 저장

모든 코인은 동일 symbol 아이콘 사용