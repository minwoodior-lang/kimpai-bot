ğŸ“¢ 1. Bithumbìš© ì§€ì‹œë¬¸ â€“ /v1/market/all ê¸°ë°˜ìœ¼ë¡œ ì™„ì „ êµì²´
ğŸ¯ ëª©í‘œ

fetchBithumbMarkets.tsë¥¼
https://api.bithumb.com/v1/market/all + korean_name / english_name ê¸°ë°˜ìœ¼ë¡œ
439ê°œ ì „ ë§ˆì¼“ì— í•œê¸€ëª…/ì˜ë¬¸ëª…ì´ ìµœëŒ€í•œ ë‹¤ ë“¤ì–´ê°€ê²Œ ë¦¬íŒ©í† ë§ í•´ì£¼ì„¸ìš”.

1) ì‚¬ìš©í•  API

ì—”ë“œí¬ì¸íŠ¸:
https://api.bithumb.com/v1/market/all

ì—¬ê¸°ì„œ ê°€ì ¸ì˜¬ í•„ë“œ ì˜ˆì‹œ:

market â†’ "USDC-KRW" ì´ëŸ° í˜•ì‹

korean_name â†’ "ìœ ì—ìŠ¤ë””"

english_name â†’ "USDC"

(ì´ë¯¸ refreshExchangeMarkets.tsì—ì„œ ì˜ ì“°ê³  ìˆë˜ ê·¸ ë¡œì§ ê·¸ëŒ€ë¡œ ê°€ì ¸ì˜¤ë©´ ë©ë‹ˆë‹¤.)

2) fetchBithumbMarkets.ts ë‚´ë¶€ ë¡œì§ êµ¬ì¡°

ê¸°ì¡´ ë‚´ìš©ì€ ì •ë¦¬í•˜ê³ , ì•„ë˜ êµ¬ì¡°ë¡œ ì¬ì‘ì„±í•´ì£¼ì„¸ìš”:

// scripts/fetchBithumbMarkets.ts
import fs from "fs";
import path from "path";

interface BithumbApiMarket {
  market: string;        // "USDC-KRW"
  korean_name?: string;  // "ìœ ì—ìŠ¤ë””"
  english_name?: string; // "USDC"
}

interface RawMarket {
  exchange: "BITHUMB";
  market_code: string;
  base_symbol: string;
  quote_symbol: string;
  name_ko?: string;
  name_en?: string;
}

// (ì„ íƒ) fallback DB â€“ ì´ë¯¸ ìˆìœ¼ë©´ ê·¸ëŒ€ë¡œ ì‚¬ìš©
const BITHUMB_FALLBACK: Record<string, { name_ko?: string; name_en?: string }> = {
  USDT: { name_ko: "í…Œë”", name_en: "Tether" },
  USDC: { name_ko: "ìœ ì—ìŠ¤ë””", name_en: "USDC" },
  // ë‚˜ë¨¸ì§€ ìˆ˜ë™ ì •ì˜ê°€ ìˆìœ¼ë©´ ê·¸ëŒ€ë¡œ ìœ ì§€
};

async function fetchBithumbMarkets() {
  const url = "https://api.bithumb.com/v1/market/all";

  const res = await fetch(url);
  if (!res.ok) {
    throw new Error(`Bithumb API error: ${res.status} ${res.statusText}`);
  }

  const data = (await res.json()) as BithumbApiMarket[] | any;

  const apiMarkets: BithumbApiMarket[] = Array.isArray(data) ? data : data?.data ?? [];

  const result: RawMarket[] = apiMarkets.map((m) => {
    const [base, quote] = m.market.split("-"); // "USDC-KRW" â†’ ["USDC","KRW"]
    const symbol = base.toUpperCase();

    const fromApiKo = m.korean_name?.trim();
    const fromApiEn = m.english_name?.trim();

    const fromFallback = BITHUMB_FALLBACK[symbol] ?? {};

    const name_ko = fromApiKo || fromFallback.name_ko || undefined;
    const name_en = fromApiEn || fromFallback.name_en || undefined;

    const market: RawMarket = {
      exchange: "BITHUMB",
      market_code: m.market,
      base_symbol: symbol,
      quote_symbol: quote.toUpperCase(),
      ...(name_ko ? { name_ko } : {}),
      ...(name_en ? { name_en } : {}),
    };

    return market;
  });

  const outPath = path.join("data", "raw", "bithumb", "markets.json");
  fs.mkdirSync(path.dirname(outPath), { recursive: true });
  fs.writeFileSync(outPath, JSON.stringify(result, null, 2), "utf-8");

  const total = result.length;
  const withName = result.filter((m) => m.name_ko || m.name_en).length;

  console.log(
    `âœ… Bithumb markets fetched: total=${total}, withName=${withName}, withoutName=${total - withName}`
  );
}

fetchBithumbMarkets().catch((err) => {
  console.error("âŒ fetchBithumbMarkets failed:", err);
  process.exit(1);
});


ì¤‘ìš” ê·œì¹™:

name_ko / name_en ê°’ì´ ì—†ìœ¼ë©´ â†’ í•„ë“œ ìì²´ë¥¼ ë„£ì§€ ë§ ê²ƒ(null ê¸ˆì§€)

ì´ë¦„ ìš°ì„ ìˆœìœ„:

Bithumb API korean_name / english_name

(ìˆë‹¤ë©´) fallback DB (BITHUMB_FALLBACK)

ì¶œë ¥ íŒŒì¼:

data/raw/bithumb/markets.json (ì§€ê¸ˆ mergeMarkets.tsê°€ ì½ëŠ” í˜•ì‹ ê·¸ëŒ€ë¡œ ìœ ì§€)

3) ì‹¤í–‰ ìˆœì„œ
npm run fetch:bithumb
npm run build:markets   # mergeMarkets.ts


ì‹¤í–‰ í›„ data/exchange_markets.json ì—ì„œ "exchange": "BITHUMB" í•­ëª©ë“¤ì´
ëŒ€ë¶€ë¶„ name_koë¥¼ ê°€ì§„ ìƒíƒœì¸ì§€ ë¡œê·¸/íŒŒì¼ë¡œ í™•ì¸ ë¶€íƒë“œë¦½ë‹ˆë‹¤.

ğŸ“¢ 2. Coinoneìš© ì§€ì‹œë¬¸ â€“ ì´ë¦„ ë³‘í•© í™œì„±í™”
ğŸ¯ ëª©í‘œ

fetchCoinoneMarkets.tsì—ì„œ
Coinone ë§ˆì¼“ API + ì´ë¦„ DB(names.json)ë¥¼ í•©ì³ì„œ
390ê°œ ë§ˆì¼“ì— name_ko / name_enì„ ìµœëŒ€í•œ ì±„ì›Œì£¼ì„¸ìš”.

ì§€ê¸ˆ êµ¬ì¡°:

data/raw/coinone/markets.json
â†’ /public/v2/markets/KRW ê¸°ë°˜ (base/quote/market ì •ë³´ë§Œ ìˆìŒ)

data/raw/coinone/names.json
â†’ â€œì§€ì› ì¤‘ì¸ ê°€ìƒìì‚° ì¢…ë¥˜ ë° ë„¤íŠ¸ì›Œí¬ ìœ í˜•â€ í…Œì´ë¸” í¬ë¡¤ë§ ê²°ê³¼ (ì‹¬ë³¼ë³„ êµ­ë¬¸ëª…/ì˜ë¬¸ëª…)

1) names.json ë¡œë”©

fetchCoinoneMarkets.ts ì•ˆì—ì„œ:

import fs from "fs";
import path from "path";

type CoinoneNameMap = {
  [symbol: string]: { name_ko?: string; name_en?: string };
};

const namesPath = path.join("data", "raw", "coinone", "names.json");
const coinoneNameMap: CoinoneNameMap =
  fs.existsSync(namesPath)
    ? JSON.parse(fs.readFileSync(namesPath, "utf-8"))
    : {};

2) Coinone API + ì´ë¦„ merge

ê¸°ë³¸ ë§ˆì¼“ ìˆ˜ì§‘ì€ ê·¸ëŒ€ë¡œ ë‘ê³ , map í•˜ëŠ” ë¶€ë¶„ë§Œ ì´ë ‡ê²Œ ì •ë¦¬:

interface RawMarket {
  exchange: "COINONE";
  market_code: string;
  base_symbol: string;
  quote_symbol: string;
  name_ko?: string;
  name_en?: string;
}

async function fetchCoinoneMarkets() {
  const res = await fetch("https://api.coinone.co.kr/public/v2/markets/KRW");
  if (!res.ok) throw new Error(`Coinone API error: ${res.status} ${res.statusText}`);

  const json = await res.json();
  const markets = json.markets ?? [];

  const result: RawMarket[] = markets.map((m: any) => {
    const base = (m.target_currency ?? "").toUpperCase(); // ì˜ˆ: BTC
    const quote = (m.base_currency ?? "").toUpperCase();  // KRW
    const marketCode = m.market;                          // "BTC-KRW"

    const names = coinoneNameMap[base] ?? {};

    const name_ko = names.name_ko?.trim() || undefined;
    const name_en = names.name_en?.trim() || undefined;

    const row: RawMarket = {
      exchange: "COINONE",
      market_code: marketCode,
      base_symbol: base,
      quote_symbol: quote,
      ...(name_ko ? { name_ko } : {}),
      ...(name_en ? { name_en } : {}),
    };

    return row;
  });

  const outPath = path.join("data", "raw", "coinone", "markets.json");
  fs.mkdirSync(path.dirname(outPath), { recursive: true });
  fs.writeFileSync(outPath, JSON.stringify(result, null, 2), "utf-8");

  const total = result.length;
  const withName = result.filter((m) => m.name_ko || m.name_en).length;

  console.log(
    `âœ… Coinone markets fetched: total=${total}, withName=${withName}, withoutName=${total - withName}`
  );
}

fetchCoinoneMarkets().catch((err) => {
  console.error("âŒ fetchCoinoneMarkets failed:", err);
  process.exit(1);
});

3) ì‹¤í–‰ ìˆœì„œ
npm run fetch:coinone
npm run build:markets


ì‹¤í–‰ í›„:

exchange_markets.json ê¸°ì¤€ìœ¼ë¡œ
"exchange": "COINONE" í•­ëª©ë“¤ì— name_koê°€ ì–´ëŠ ì •ë„ ì±„ì›Œì¡ŒëŠ”ì§€ í™•ì¸.