🚀 Kimp AI – v2.2.0 UI & 체감속도 개선 지시문

담당자분께,
아래는 Kimpga UX와의 차이를 줄이기 위한 추가 수정 요청입니다.
이번 스프린트에서는 표기 통일 + 거래대금 신뢰도 + 가격 변동 시각 효과 3가지만 집중적으로 반영 부탁드립니다.

[요청 1] 해외 거래소 드롭다운 레이블/아이콘 정리

현재 우리 서비스의 해외 거래소 드롭다운은 단순히
바이낸스 / Bybit / OKX … 형태로만 보입니다.

Kimpga처럼 “거래쌍 기준이 명확한 레이블 + 거래소 아이콘” 으로 바꿔 주세요.

1-1. 레이블 예시 (표기는 이런 식으로)

바이낸스 USDT 마켓

바이낸스 BTC 마켓

바이낸스 선물 USDS-M 마켓

OKX USDT 마켓

Bybit USDT 마켓

Bitget USDT 마켓

HTX USDT 마켓

Gate USDT 마켓

MEXC USDT 마켓

※ 실제로 지원하는 마켓 조합만 남겨 주시면 됩니다.
※ Gate.io 표기는 Gate.io USDT 마켓 으로 통일.

1-2. 구현 방식 제안

현재 쓰는 FOREIGN_EXCHANGES 같은 설정을 아래처럼 구조화 부탁드립니다.

type ForeignExchangeOption = {
  id: 'BINANCE_USDT' | 'BINANCE_BTC' | 'BYBIT_USDT' | ...;
  label: string;      // 드롭다운에 표시되는 한글 레이블
  icon?: string;      // 'binance' | 'okx' | 'bybit' 등
};

const FOREIGN_EXCHANGES: ForeignExchangeOption[] = [
  { id: 'BINANCE_USDT', label: '바이낸스 USDT 마켓', icon: 'binance' },
  { id: 'OKX_USDT',     label: 'OKX USDT 마켓',     icon: 'okx' },
  ...
];


value/id는 기존 코드 그대로 사용하고
label만 위 형식으로 교체해 주세요.

가능하면 거래소 로고 아이콘도 함께 넣어 주세요.
(지금 국내 거래소 드롭다운에 쓰는 아이콘 스타일과 동일하게)

[요청 2] 거래액(일) – 해외 거래액 표기 & API 신뢰도 재확인

이전 버전에서 업비트/OKX는 수치가 잘 맞기 시작했지만,
사용자 입장에서 여전히 “해외 거래액이 뭔가 체감상 다르다”는 느낌이 있습니다.

2-1. UI 표기 형태 유지 + KRW 기준 명확화

PremiumTable의 거래액(일) 셀은 현재처럼 3줄 구조 유지해 주세요.

1줄: ₩XXXX억 (국내)

2줄: ₩YYYY억/조 (해외) ← 해외도 반드시 KRW 기준

3줄: $ZZZ.M USDT (보조 텍스트, 작은 폰트)

여기서 중요한 것은:

2번째 줄이 선택한 해외 거래소의 실제 24h 볼륨 × USDT/KRW 환율 이라는 점

글로벌 볼륨이 아니라, 현재 선택된 거래소의 spot BTCUSDT 마켓 기준 이어야 합니다.

2-2. 거래소별 volume 필드 다시 한 번 체크 (간단 검증)

이미 OKX/HTX는 손봐주신 걸 알고 있습니다만,
Bybit / Bitget / Gate / MEXC 도 아래 방식으로 한 번만 더 확인 부탁드립니다.

BTC 한 종목만 기준으로:

각 거래소 공식 API에서 BTCUSDT 24h ticker 호출

우리가 쓰는 volume24hUsdt 값과 비교

예) (개념만, 실제 엔드포인트는 이미 scripts/exchangeFetchers.ts에 있으니 그걸 쓰셔도 됩니다.)

# 1) 거래소 공식 API
curl "<EXCHANGE_24H_TICKER_FOR_BTCUSDT>"

# 2) 우리 백엔드
curl "http://localhost:5000/api/premium/table?domestic=UPBIT_KRW&foreign=<EXCHANGE_CODE_USDT>" \
  | jq '.rows[] | select(.symbol=="BTC") | {symbol, volume24hUsdt}'


두 값이 자릿수까지 거의 비슷하게 나오면 정상입니다.
혹시라도 특정 거래소에서 base volume × price 방식으로 계산하고 있다면
반드시 24h quote volume(USDT 기준) 필드로 교체 부탁드립니다.

[요청 3] 가격/김프 값 변경 시 “깜빡임 애니메이션” 추가

지금은 값이 바뀌어도 숫자만 조용히 갱신되어서
실제론 1~2초마다 업데이트 되고 있어도 사용자 눈에는 잘 안 띄는 상태입니다.

Kimpga처럼, 값이 변할 때 순간적으로 깜빡이는 효과를 넣어 주세요.

3-1. 갱신 주기

프론트에서 /api/premium/table 호출 타이머를 1000ms(1초) 기준으로 맞춰 주세요.

현재 Rate-Limit이 2초당 2회라서, 1초 간격 request는 안전합니다.

실제 값이 안 바뀌면 그냥 동일 데이터만 오니까 문제 없습니다.

3-2. 값 변경 감지 로직 (React)

PremiumTable에서 각 행(row)에 대해:

이전 값 vs 새 값을 비교해서

국내 가격, 해외 가격, 김프 %, 전일대비 % 정도만 변동 감지

값이 변하면:

올라갔는지 / 내려갔는지 방향 판단 후

해당 셀에 CSS 클래스 부여

의사코드 예시:

const [lastValues, setLastValues] = useState<Record<string, number>>({});

useEffect(() => {
  rows.forEach((row) => {
    const key = row.symbol + '-' + foreignExchange;
    const prev = lastValues[key];
    const next = row.premiumPercent; // 혹은 priceKrw 등

    if (prev !== undefined && prev !== next) {
      const direction = next > prev ? 'up' : 'down';
      triggerFlash(key, direction); // 셀에 클래스 부여
    }
  });

  setLastValues(/* ...현재 값 저장... */);
}, [rows, foreignExchange]);

3-3. CSS 애니메이션 예시
.flash-up {
  background-color: rgba(0, 255, 0, 0.18);
  transition: background-color 0.6s ease-out;
}

.flash-down {
  background-color: rgba(255, 0, 0, 0.18);
  transition: background-color 0.6s ease-out;
}


값이 바뀌면 .flash-up 또는 .flash-down 클래스를 잠깐 붙였다가
setTimeout(() => removeClass(), 600) 식으로 자연스럽게 페이드아웃되게 해 주세요.

가능하면 숫자를 감싸는 <span>에만 적용해서, 전체 행이 번쩍이지는 않게.